<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Gestor de Plantas</title>

<style>
/* Tus estilos originales tal cual estaban */
body { font-family: Arial; padding:20px; background:#f8f8f8; }
h2 { margin-top:30px; }
.form-box{
  border:1px solid #ddd;
  padding:15px;
  border-radius:10px;
  margin-bottom:20px;
  background:white;
}
.cuadrante_input{
  display:block;
  margin-bottom:5px;
  padding:6px;
  border:1px solid #aaa;
  border-radius:5px;
}
.add-btn{
  display:inline-block;
  margin-left:10px;
  border:1px solid #333;
  padding:2px 8px;
  border-radius:8px;
  background:none;
  cursor:pointer;
}
.add-btn:hover{
  background:#eee;
}
.grid-pickers{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:20px;
  margin-top:20px;
}
</style>

<!-- Firebase SDK (Compat mode) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

</head>
<body>

<h1>Gestor de Plantas</h1>

<!-- =========  PLANTA 1  ========= -->
<div class="form-box">
  <h2>Planta 1</h2>
  <label>Título:</label>
  <input id="p1_title" type="text"><br><br>

  <label>Nº Usuarios:</label>
  <input id="p1_users" type="number"><br><br>

  <label>Mensaje:</label>
  <input id="p1_msg" type="text"><br><br>

  <label>Cuadrantes:</label>
  <button class="add-btn" onclick="addCuadrante(1)">añadir</button>
  <div id="p1_cuadrantes_container"></div>

  <br>
  <button onclick="goToPlant(1)">Ver Planta</button>
</div>

<!-- =========  PLANTA 2  ========= -->
<div class="form-box">
  <h2>Planta 2</h2>
  <label>Título:</label>
  <input id="p2_title" type="text"><br><br>

  <label>Nº Usuarios:</label>
  <input id="p2_users" type="number"><br><br>

  <label>Mensaje:</label>
  <input id="p2_msg" type="text"><br><br>

  <label>Cuadrantes:</label>
  <button class="add-btn" onclick="addCuadrante(2)">añadir</button>
  <div id="p2_cuadrantes_container"></div>

  <br>
  <button onclick="goToPlant(2)">Ver Planta</button>
</div>

<!-- =========  PLANTA 3  ========= -->
<div class="form-box">
  <h2>Planta 3</h2>
  <label>Título:</label>
  <input id="p3_title" type="text"><br><br>

  <label>Nº Usuarios:</label>
  <input id="p3_users" type="number"><br><br>

  <label>Mensaje:</label>
  <input id="p3_msg" type="text"><br><br>

  <label>Cuadrantes:</label>
  <button class="add-btn" onclick="addCuadrante(3)">añadir</button>
  <div id="p3_cuadrantes_container"></div>

  <br>
  <button onclick="goToPlant(3)">Ver Planta</button>
</div>

<!-- =========  PICKERS AUTÓNOMOS  ========= -->
<h2>Pickers Autónomos</h2>
<div class="grid-pickers">

  <!-- PICKER 1 -->
  <div class="form-box">
    <h3>Picker 1</h3>

    <label>Título:</label>
    <input id="pk1_title" type="text"><br><br>

    <label>Mensaje:</label>
    <input id="pk1_msg" type="text"><br><br>

    <label>Cuadrantes:</label>
    <button class="add-btn" onclick="addPickerCuadrante(1)">añadir</button>
    <div id="pk1_cuadrantes_container"></div>

    <br>
    <button onclick="goToPicker(1)">Ver Picker 1</button>
  </div>

  <!-- PICKER 2 -->
  <div class="form-box">
    <h3>Picker 2</h3>

    <label>Título:</label>
    <input id="pk2_title" type="text"><br><br>

    <label>Mensaje:</label>
    <input id="pk2_msg" type="text"><br><br>

    <label>Cuadrantes:</label>
    <button class="add-btn" onclick="addPickerCuadrante(2)">añadir</button>
    <div id="pk2_cuadrantes_container"></div>

    <br>
    <button onclick="goToPicker(2)">Ver Picker 2</button>
  </div>

  <!-- PICKER 3 -->
  <div class="form-box">
    <h3>Picker 3</h3>

    <label>Título:</label>
    <input id="pk3_title" type="text"><br><br>

    <label>Mensaje:</label>
    <input id="pk3_msg" type="text"><br><br>

    <label>Cuadrantes:</label>
    <button class="add-btn" onclick="addPickerCuadrante(3)">añadir</button>
    <div id="pk3_cuadrantes_container"></div>

    <br>
    <button onclick="goToPicker(3)">Ver Picker 3</button>
  </div>

  <!-- PICKER 4 -->
  <div class="form-box">
    <h3>Picker 4</h3>

    <label>Título:</label>
    <input id="pk4_title" type="text"><br><br>

    <label>Mensaje:</label>
    <input id="pk4_msg" type="text"><br><br>

    <label>Cuadrantes:</label>
    <button class="add-btn" onclick="addPickerCuadrante(4)">añadir</button>
    <div id="pk4_cuadrantes_container"></div>

    <br>
    <button onclick="goToPicker(4)">Ver Picker 4</button>
  </div>

</div>

<script>
// ========= FIREBASE =========
const firebaseConfig = {
  apiKey: "AIzaSyCbh2FcoS3IK4wp4hXhX0NICGIDBbFQhGU",
  authDomain: "gestor-de-plantas.firebaseapp.com",
  projectId: "gestor-de-plantas",
  storageBucket: "gestor-de-plantas.firebasestorage.app",
  messagingSenderId: "653631965210",
  appId: "1:653631965210:web:82e503927c1064610be9a3",
  measurementId: "G-G7PN58F09R"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ========= FUNCIONES DE PLANTAS =========
function addCuadrante(plantNum){
  const container = document.getElementById(`p${plantNum}_cuadrantes_container`);
  const input = document.createElement('input');
  input.type = 'text';
  input.placeholder = 'QU0000346545';
  input.className = 'cuadrante_input';
  container.appendChild(input);
}

function goToPlant(plantNum){
  const title = document.getElementById(`p${plantNum}_title`).value;
  const users = document.getElementById(`p${plantNum}_users`).value;
  const msg = document.getElementById(`p${plantNum}_msg`).value;

  const cuadrantes = Array.from(document.querySelectorAll(`#p${plantNum}_cuadrantes_container .cuadrante_input`))
    .map(i=>i.value).filter(v=>v);

  const params = new URLSearchParams({
    title,
    users,
    msg,
    cuadrantes: cuadrantes.join(',')
  }).toString();

  let url = '';
  if(plantNum===1) url = 'first.html';
  if(plantNum===2) url = 'second.html';
  if(plantNum===3) url = 'third.html';

  window.open(`${url}?${params}`, '_blank');
}

// ========= FUNCIONES PICKERS =========
function addPickerCuadrante(n){
  const box = document.getElementById(`pk${n}_cuadrantes_container`);
  const input = document.createElement('input');
  input.type = 'text';
  input.placeholder = 'QU0000346545';
  input.className = 'cuadrante_input';
  box.appendChild(input);
}

function goToPicker(n){
  const title = document.getElementById(`pk${n}_title`).value;
  const msg = document.getElementById(`pk${n}_msg`).value;

  const cuadrantes = Array.from(document.querySelectorAll(`#pk${n}_cuadrantes_container .cuadrante_input`))
    .map(i=>i.value).filter(v=>v);

  const params = new URLSearchParams({
    pickerNum: n,
    title,
    msg,
    cuadrantes: cuadrantes.join(',')
  }).toString();

  window.open(`picker${n}.html?${params}`, '_blank');
}
</script>

</body>
</html>
